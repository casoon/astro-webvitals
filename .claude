# Astro WebVitals Component

## Projekt-√úbersicht
Eine umfassende Web Vitals & Accessibility Monitoring-Komponente f√ºr Astro. Zero-Dependencies, performant und production-ready mit integriertem WCAG-Checker.

## Kern-Features
- **Core Web Vitals Tracking**: LCP, FID, CLS, FCP, TTFB, INP
- **WCAG Accessibility Checker**: Findet fehlende Alt-Texte, Labels, und andere A11y-Probleme
- **Kompaktes Debug Overlay**: Minimiert/Erweitert mit Tab-Organisation
- **Performance Score**: 0-100 Punkte Bewertung mit visueller Anzeige
- **Analytics Integration**: Flexibles Endpoint-System mit Batch-Support
- **Zero Dependencies**: Keine externen Abh√§ngigkeiten, ~10KB minified

## Architektur

### Komponenten-Struktur
```
src/
‚îú‚îÄ‚îÄ WebVitals.astro    # Vereinheitlichte Komponente mit allen Features
‚îî‚îÄ‚îÄ index.ts           # TypeScript Exports und Interfaces
```

### Technische Details
- **Inline Script**: Vermeidet zus√§tzliche Netzwerk-Requests
- **Performance Observer API**: Native Browser-APIs f√ºr Metriken
- **WCAG Checker**: Automatische Accessibility-Pr√ºfung im DOM
- **Conditional Rendering**: Nur aktiv wenn ben√∂tigt (`shouldTrack`)
- **Batch Reporting**: Sammelt Metriken und sendet geb√ºndelt
- **Tab-basiertes UI**: Organisierte Darstellung ohne √úberladung

## Verwendungszweck

### Development
- Performance-Debugging w√§hrend Entwicklung
- Sofortiges visuelles Feedback
- Identifikation von Bottlenecks

### Production
- Real User Monitoring (RUM)
- SEO-Optimierung (Core Web Vitals = Google Ranking-Faktor)
- User Experience Analytics

## Implementierungs-Beispiele

### Basic Setup
```astro
import { WebVitals } from '@casoon/astro-webvitals';
<WebVitals />
```

### Development mit Debug
```astro
<WebVitals debug={import.meta.env.DEV} position="bottom-right" />
```

### Production mit Analytics
```astro
<WebVitals endpoint="/api/analytics/vitals" />
```

## Aktuelle Features (v0.1.0)

### ‚úÖ Bereits implementiert
- **Core Web Vitals**: Alle wichtigen Metriken (LCP, FID, CLS, FCP, TTFB, INP)
- **WCAG Checker**: Findet fehlende Alt-Texte, Labels, Heading-Probleme
- **Batch Reporting**: Reduziert Netzwerk-Requests
- **Sampling Rate**: Kontrolle √ºber Tracking-Prozentsatz
- **Performance Budgets**: Schwellwerte mit Alerts
- **Smart Detection**: Rage-Clicks, Dead-Clicks (optional)
- **Extended Metrics**: Memory, Network Info (optional)
- **Kompaktes UI**: Minimiert/Erweitert mit Tabs

### üéØ Zuk√ºnftige Erweiterungen
1. **Erweiterte WCAG-Checks**:
   - Kontrast-Pr√ºfung
   - ARIA-Attribute Validierung
   - Fokus-Reihenfolge
   - Keyboard-Navigation Tests

2. **Visualisierung**:
   - Historische Trends
   - Vergleiche zwischen Seiten
   - Heatmaps f√ºr Problembereiche

3. **AI-Integration**:
   - Automatische Performance-Empfehlungen
   - Predictive Analytics
   - Anomalie-Erkennung

## Best Practices

### Do's
- ‚úÖ In Layout-Komponente einbinden (einmal pro Seite)
- ‚úÖ Endpoint nur in Production setzen
- ‚úÖ Debug-Mode in Development nutzen
- ‚úÖ Metriken regelm√§√üig analysieren

### Don'ts
- ‚ùå Mehrfach auf einer Seite einbinden
- ‚ùå Debug-Mode in Production aktivieren
- ‚ùå Sensible Daten in Metriken senden
- ‚ùå Zu hohe Sampling-Rate (wenn implementiert)

## Testing-Strategie

### Unit Tests (zu implementieren)
- Mock Performance Observer API
- Testen der Metrik-Berechnungen
- Endpoint-Kommunikation

### E2E Tests
- Playwright/Cypress mit Performance-Checks
- Verschiedene Browser/Devices
- Slow Network Simulation

## Deployment Checklist
- [ ] Environment-spezifische Konfiguration
- [ ] Analytics-Endpoint eingerichtet
- [ ] CORS-Headers konfiguriert (falls n√∂tig)
- [ ] Rate-Limiting f√ºr Endpoint
- [ ] Monitoring f√ºr Endpoint-Verf√ºgbarkeit

## Verwandte Projekte
- **AuditMySite Studio**: Umfassendes Website-Audit-Tool
- **web-vitals Library**: Google's offizielle Library (Alternative)
- **Lighthouse CI**: Automatisierte Performance-Tests

## Support & Dokumentation
- GitHub: https://github.com/casoon/astro-webvitals
- NPM: https://www.npmjs.com/package/@casoon/astro-webvitals
- Web Vitals Docs: https://web.dev/vitals/

## UI/UX Design

### Debug Overlay States
1. **Minimiert (Default)**:
   - Zeigt Performance Score (0-100)
   - Anzahl gemessener Metriken
   - Anzahl gefundener Issues
   - Klick zum Erweitern

2. **Erweitert**:
   - **Tab: Core Vitals**: Metriken mit Fortschrittsbalken
   - **Tab: Accessibility**: WCAG-Issues gruppiert nach Typ
   - **Tab: Details**: Extended Metrics (Memory, Network)

### Farbschema
- **Gr√ºn (#10B981)**: Good performance (80-100 Score)
- **Orange (#F59E0B)**: Needs improvement (60-79 Score)
- **Rot (#EF4444)**: Poor performance (0-59 Score)
- **Blau (#60A5FA)**: Aktive Tabs und Links

## Kontext f√ºr AI-Assistenten

Diese Komponente ist production-ready und folgt Best Practices. Bei Erweiterungen sollte auf folgende Punkte geachtet werden:

### Technische Anforderungen
1. **Bundle-Gr√∂√üe**: Minimal halten, keine unn√∂tigen Dependencies
2. **Performance**: Keine blockierenden Operationen
3. **Browser-Support**: Modern Browsers (Chrome 60+, Firefox 60+, Safari 14+)
4. **TypeScript**: Vollst√§ndige Typisierung ohne `any`
5. **Astro-Kompatibilit√§t**: v4.0.0+ und v5.0.0+

### Code-Qualit√§t
- **Keine `any` Types**: Alle TypeScript-Interfaces sind vollst√§ndig typisiert
- **Inline Scripts**: Optimiert f√ºr minimale Netzwerk-Requests
- **Error Handling**: Graceful degradation bei nicht unterst√ºtzten APIs
- **Accessibility**: WCAG 2.1 Level AA konform im Debug-Overlay

### Wichtige Dateien
- `src/WebVitals.astro`: Hauptkomponente (einzige Komponente)
- `src/index.ts`: TypeScript Definitionen
- `docs/`: Umfassende Dokumentation
- `.claude`: Diese Datei mit Projekt-Kontext

### Aktuelle Version
- **Version**: 0.1.0
- **Status**: Production-ready
- **Package Manager**: pnpm
- **Node Version**: 20.18.0 (via Volta)
